# {{info.name}}

{{#if (stringEquals version "20x")}}
!!! success "Effective Date(s) & Overall Applicability for 20x: {{ucfirst info.effective.20x.is}} ({{info.effective.20x.current_status}})"
      {{#each info.effective.20x.comments}}
      - {{this}}
      {{/each}}
{{/if}}

{{#if (stringEquals version "rev5")}}
!!! success "Effective Date(s) & Overall Applicability for Rev5: {{ucfirst info.effective.rev5.is}}"
      - **{{ucfirst info.effective.rev5.is}} ({{info.effective.rev5.current_status}}) beginning {{info.effective.rev5.start_date}}.**
      {{#each info.effective.rev5.comments}}
      - {{this}}
      {{/each}}
      
      {{#if info.effective.rev5.signup_url}}
      - **Beta Sign-up Form:** [{{info.effective.rev5.signup_url}}]({{info.effective.rev5.signup_url}})
      {{/if}}
{{/if}}

{{info.front_matter.purpose}}

??? info "Version {{info.releases.[0].id}} published on {{info.releases.[0].published_date}} " 
    **History:**

{{#each info.releases}}
    - **{{this.id}} ({{this.published_date}}):** {{this.description}}
{{/each}}    


??? abstract "Background & Authority"
{{#each info.front_matter.authority}}
    - [{{reference}}]({{reference_url}}) {{description}}
{{/each}}

---

{{!-- Definitions section (FRD) --}}
{{#if FRD}}

  {{#each FRD}}
    {{#FRDSorted this}}
### {{term}}

!!! quote ""
    {{definition}}
      {{#if note}}

    **Note:** {{note}}
      {{/if}}
      {{#if notes}}

    **Notes:**
        {{#each notes}}

    - {{this}}
        {{/each}}
      {{/if}}      
      {{#if reference}}
    [**Reference:** {{reference}}]({{reference_url}})
{{/if}}
{{#if alts}}

    **Also:** {{#each alts}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}
{{/if}}

    **ID:** {{id}}
    {{/FRDSorted}}

  {{/each}}

{{/if}}








{{!-- Requirements section (FRR) --}}

{{#if FRR}}

  {{#each FRR}}
    {{#each this}}
        
{{#if this.name}}
## {{this.name}}
{{else}}
## {{this.id}}
{{/if}}

!!! info ""
    {{this.application}}
      {{#each requirements}}

{{#if this.name}}
### {{this.id}} {{this.name}}
{{else}}
### {{this.id}}
{{/if}}

!!! quote ""
    {{this.statement}}
        {{#if following_information}}
          {{#each following_information}}

    1. {{this}}
          {{/each}}
        {{/if}}
        {{#if following_information_bullets}}
          {{#each following_information_bullets}}

    - {{this}}
          {{/each}}
        {{/if}}        
        {{#if pain_timeframes}}
        

    | Potential Adverse Impact | LEV + IRV | LEV + NIRV | NLEV |
    |-------------------------|-----------|------------|------|
          {{#each pain_timeframes}}
    | N{{this.pain}} | {{this.max_days_irv_lev}}|{{this.max_days_nirv_lev}} | {{this.max_days_nlev}}|
          {{/each}}
        {{/if}}
      {{#if note}}

    **Note:** {{note}}
      {{/if}}

      {{#if notes}}

    **Notes:**
        {{#each notes}}

    - {{this}}
        {{/each}}
      {{/if}}  

      {{#if impact}}
      {{!-- this is super messy but ok for now --}}
    **Applies to:** {{#if impact.low}}Low{{#if impact.moderate}}, {{/if}}{{/if}}{{#if impact.moderate}}Moderate{{#if impact.high}}, {{/if}}{{/if}}{{#if impact.high}}High{{/if}}
      {{/if}}
    
    {{/each}}

---   

    {{/each}}      

  {{/each}}

{{/if}}


{{!-- KSIs have a different structure that is added afterwards --}}

{{#if KSI}}
## Key Security Indicators
  {{#each KSI}}
    {{#with this}}
### {{name}}

!!! info ""
    {{theme}}

      {{#each indicators}}
{{#if name}}      
#### {{id}} {{name}}
{{else}}
{{#if retired}}
#### {{id}} (Retired)
{{else}}
#### {{id}}
{{/if}}
{{/if}}

{{#if retired}}
!!! note "This KSI ID was retired in the 20x Phase Two Pilot"
{{else}}
!!! quote ""
{{/if}}

{{#if statement}}
    {{statement}}
{{/if}}
{{#if following_information}}
          {{#each following_information}}

    1. {{this}}
          {{/each}}
        {{/if}}
      {{#if note}}

    **Note:** {{note}}
      {{/if}}
      {{#if notes}}

    **_Notes:_**
        {{#each notes}}

    - {{this}}
        {{/each}}
      {{/if}}  

        {{#if controls}}

    **Related SP 800-53 Controls:** {{#each controls}}{{ uppercase control_id }}{{#unless @last}}, {{/unless}}{{/each}}
    {{/if}}
        {{#if impact}}
 {{#if reference}}

    **Reference:** [{{reference}}]({{reference_url}})
{{/if}}

          {{#unless retired}}
        {{!-- this is super messy but ok for now --}}
      **Applies to:** {{#if impact.low}}Low{{#if impact.moderate}}, {{/if}}{{/if}}{{#if impact.moderate}}Moderate{{#if
        impact.high}}, {{/if}}{{/if}}{{#if impact.high}}High{{/if}}
          {{/unless}}      

        {{/if}}

      {{/each}}
    {{/with}}
---
  {{/each}}

{{/if}}


{{!-- Maybe this has some technical assistance? FRA --}}
{{#if FRA}}
# Technical assistance

  {{#each FRA}}
### {{id}}

**Purpose:** {{this.purpose}}

**Disclaimer:** {{this.disclaimer}}

**{{this.application}}**
    {{#each requirements}}

#### {{this.id}}

{{this.statement}}

        {{#if this.examples}}
          {{#each this.examples}}
##### {{this.id}}

Key Tests:

          {{#each this.key_tests}}
- {{this}}
          {{/each}}

Examples:

          {{#each this.examples}}
- {{this}}
          {{/each}}
          
          {{/each}}
        {{/if}}

---   
    
    {{/each}}      
  
  {{/each}}
{{/if}}